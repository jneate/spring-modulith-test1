spring:
  application:
    name: spring-modulith-test1
  mongodb:
    uri: ${MONGODB_URI:mongodb://mongo1:27017,mongo2:27017,mongo3:27017/?replicaSet=rs0}
    database: ${MONGODB_DATABASE:country-db}
    representation:
      uuid: STANDARD
  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JacksonJsonSerializer
  modulith:
    events:
      # Enable automatic retry of incomplete events on startup
      republish-outstanding-events-on-restart: true
      # Enable scheduled retry for stuck events (disabled by default - enable only if needed)
      retry-scheduled: false
      # Event completion tracking mode
      completion-mode: UPDATE
      # Retry template configuration
      retry-template:
        max-attempts: 3
        backoff-delay: 1000ms
        exponential-backoff: true
        multiplier: 2.0
      # Publication registry cleanup
      publication:
        registry:
          cleanup:
            max-age: 1d
            incomplete-max-age: 7d

# Logging configuration
logging:
  level:
    dev.neate: DEBUG
    org.springframework.modulith: DEBUG
